#summary GolfML and Open Street Map.
#sidebar TableOfContents

= Introduction =

The GolfML project includes several sample transformations to interact with related projects.

The Open Street Map initiative is indeed a project of interest as it allows golfer to store golf course information directly in Open Street Map layers of information.


= GolfML to Open Street Map =

The overall structure of golf course information in a GolfML document looks very much like this:

http://golfml.googlecode.com/files/golf-course-golfml.png

The GolfML to Open Streep Map transformation convert the above structure into something like this:

http://golfml.googlecode.com/files/golf-course-osm.png

Boxes with the same colour contain the same information.

Please note that in the above picture, boxes with a dashed line contour do not really exist in the Open Street Map XML document structure.
They are added to easy the reading of the document.
In the XML document, they appears as XML comments.

Here is an example of osm file as generated by the stylesheet.

{{{
<?xml version="1.0" encoding="utf-8"?>
<osm version="0.6" generator="golfml2osm">
	<bounds minlat="0" maxlat="0" minlon="0" maxlon="0"/>
<!--
P A R T   1 :   G O L F   C O U R S E   D A T A
-->
	<!-- 1.1. Golf course data for holes.-->
	<!-- 1.1.1. Hole data for hole 1.-->
	<node id="d0e482" lat="50.54046280307161" lon="4.503922041366401" userid="golfml"/>
	<node id="d0e487" lat="50.5404268138608" lon="4.503892593622558" userid="golfml"/>
	...
	<way id="d0e473">
		<nd ref="d0e482"/>
		<nd ref="d0e487"/>
		...
		<tag k="ref" v="1"/><!--green-->
		<tag k="golf" v="green"/>
	</way>
	...
	<!--1.1.2. Hole data for hole 2.-->
	...
	<!--1.1.17. Hole data for hole 17.-->
	...
	<node id="d0e18939" lat="50.54195954098935" lon="4.503605471270484" userid="golfml">
		<tag k="ref" v="17"/><!--tree-->
		<tag k="natural" v="tree"/>
	</node>
	...
	<!--1.1.18. Hole data for hole 18.-->
	...
	<!--1.2  Golf course data for other elements and facilities.-->
	<node id="d0e59" lat="50.543912174536" lon="4.500490167333107" userid="golfml"/>
	<node id="d0e64" lat="50.54416814979475" lon="4.500888048576899" userid="golfml"/>
	...
	<way id="d0e50">
		<nd ref="d0e59"/>
		<nd ref="d0e64"/>
		...
		<!--hole19th-->
		<tag k="amenity" v="restaurant"/>
	</way>
	...
<!--
P A R T   2 :   H O L E   R E L A T I O N S
-->
<!--2.1. Hole relation for hole 1.-->
	<relation id="d0e287">
		<tag k="golf" v="hole"/>
		<tag k="ref" v="1"/>
		<tag k="par:red" v="5"/>
		<tag k="handicap:red" v="12"/>
		<tag k="dist:red" v="470"/>
		<tag k="par:blue" v="5"/>
		<tag k="handicap:blue" v="12"/>
		<tag k="dist:blue" v="470"/>
		<member ref="d0e291" type="way" userid="golfml"><!--tee--></member>
		<member ref="d0e324" type="way" userid="golfml"><!--tee--></member>
		<member ref="d0e357" type="way" userid="golfml"><!--greenside-trap--></member>
		<member ref="d0e415" type="way" userid="golfml"><!--greenside-trap--></member>
		<member ref="d0e473" type="way" userid="golfml"><!--green--></member>
		<member ref="d0e556" type="way" userid="golfml"><!--fairway--></member>
		<member ref="d0e674" type="way" userid="golfml"><!--fairway--></member>
		<member ref="d0e882" type="way" userid="golfml"><!--fairway-trap--></member>
		<member ref="d0e930" type="way" userid="golfml"><!--hole-contour--></member>
		<member ref="d0e1008" type="way" userid="golfml"><!--trees--></member>
		<member ref="d0e1051" type="way" userid="golfml"><!--trees--></member>
		<member ref="d0e1109" type="way" userid="golfml"><!--trees--></member>
		<member ref="d0e1157" type="way" userid="golfml"><!--trees--></member>
	</relation>
<!--2.2. Hole relation for hole 2.-->
	...
<!--
P A R T   3 :   G O L F   C O U R S E   R E L A T I O N
-->
<!--3.1. Golf course data for Golf de la Bruyère.-->
	<relation id="d0e39">
		<tag k="type" v="golf_course"/>
		<tag k="name" v="Golf de la Bruyère"/>
		<tag k="cr:red" v="70.0"/>
		<tag k="sr:red" v="123"/>
		<tag k="cr:blue" v="72.0"/>
		<tag k="sr:blue" v="113"/>
<!--3.2. Members for holes.-->
		<!--3.2.1. Members for hole 1.-->
		<member ref="d0e291" type="way" userid="golfml"><!--tee--></member>
		<member ref="d0e324" type="way" userid="golfml"><!--tee--></member>
		...
		<!--3.2.2. Members for hole 2.-->
		...
<!--3.3. Members for facilities.-->
		<member ref="d0e50" type="way" userid="golfml"><!--hole19th--></member>
		...
	</relation>
</osm>
}}}

== Rationale ==

For a given golf course, GolfML isolates GPS positions (WSG84) in a `<holes>` element.

Points of interest (`<poi>`) are converted to *nodes*. Tags are added to specify the hole to which the node belongs to and to qualify the node (what it represents): golf flag (pin), tee, a tree...

Areas of interest (`<aoi>`) are converted to *ways*. We used the same structure as Open Street Map: We first lists nodes (without any other information), and then references these nodes in a way element. Tags are added to specify the hole to which the way belongs to and to qualify the way (what it represents): fairway, green, rough...

Points and areas of interest that do not belong to a specific hole (for instance cart path, lakes, woods...) are added after, without any reference to any hole but with tags to qualify what they represent (example: natural=water, highway=footpath...)

For each hole, we add a `relation` element to group all nodes and ways together and to specify golf course information as recommended in [http://wiki.openstreetmap.org/wiki/Proposed_features/Golf_course Open Street Map for Golf].

{{{
	<relation id="d0e287">
		<tag k="golf" v="hole"/>
		<tag k="ref" v="1"/>
		<tag k="par:red" v="5"/>
		<tag k="handicap:red" v="12"/>
		<tag k="dist:red" v="450"/>
		<tag k="par:blue" v="5"/>
		<tag k="handicap:blue" v="12"/>
		<tag k="dist:blue" v="470"/>
		<member
		...
}}}

Finally, for the entire course, we add an additional  `relation` element to group all nodes and ways that belong to this golf course together. In this final element, we also add some global golf course tags.

{{{
	<relation id="d0e39">
		<tag k="type" v="golf_course"/>
		<tag k="name" v="Golf de la Bruyère"/>
		<tag k="cr:red" v="70.0"/>
		<tag k="sr:red" v="123"/>
		<tag k="cr:blue" v="72.0"/>
		<tag k="sr:blue" v="113"/>
		<member
		...
}}}


= Open Street Map to GolfML =

The transformation from Open Street Map to GolfML is being developed. More information soon.